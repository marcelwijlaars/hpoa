<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html>
<head>
   <title>HP BladeSystem Onboard Administrator</title>
  <link rel="SHORTCUT ICON" href="120814-042457/images/favicon.ico" />
  <meta http-equiv="cache-control" content="no-cache"/>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9"/>
  <script type="text/javascript" src="120814-042457/js/EnvironConstants.js"></script>
  <script type="text/javascript" src="120814-042457/js/alertManager.js"></script>
  <script type="text/javascript">
defaultAlert=window.alert;
var alertMgr=new AlertManager();
function getAlertManager(){
return alertMgr;
}
  </script>
  <script type="text/javascript" src="120814-042457/js/debugger.js"></script>
  <script type="text/javascript" src="120814-042457/js/global.js"></script>
  <script type="text/javascript" src="120814-042457/js/globalVars.js"></script>  
  <script id="inlineScript" type="text/javascript">
getBrowserInfo();
var sessionUrl=getCookieValue("sessionUrl");
if(sessionUrl!=""&&sessionUrl==encodeURI(top.location.href)){
setCookieValue("sessionUrl","");
top.location.replace(encodeURI(top.location.href));
}else{
setCookieValue("sessionUrl",encodeURI(top.location.href));
gDebugReady=true;
}
var cacheItems=new Object();
var chromeCacheItems=new Object();
var scriptsLoaded=0;
var templatesLoaded=0;
var cacheWarning=false;
var nextTemplate=null;
var allLoaded=false;
var logoutExpression="top.expireSession(true)";
var logoutTimerId=null;
var currentTimeoutValue=null;
var templateCacheEnabled=(!isLocalDev()&&(location.search.indexOf('tcache=false')==-1)?true:false);
var interfaceFwVersion='';
var primaryWebRestart=false;
function resetContextData(){
primaryWebRestart=false;
deleteCookieValue("pageRestore");
deleteCookieValue("wizStep");
}
function getChromeCacheItem(url){
if(typeof(chromeCacheItems[url])!="undefined"){
if(gDebugOn==true){
top.logEvent(["Current chrome cache list."].concat(getCachedList()),null,8,1);
}
return chromeCacheItems[url];
}
return false;
};
function addChromeCacheItem(url,item){
if(templateCacheEnabled){
chromeCacheItems[url]=item;
}
}
function trackSessionByMouse(){
startLogoutTimer();
};
function canCache(url){
for(var i in noCacheItems){
if((""+url).indexOf(noCacheItems[i])>-1){
return false;
}
}
return true;
}
function toggleTemplateCache(enable){
templateCacheEnabled=parseBool(enable);
}
function getCacheTemplate(templateName){
if(typeof(cacheItems[templateName])!="undefined"){
if(gDebugOn==true){
top.logEvent(["Current cacheList."].concat(getCachedList()),null,8,1);
}
return cacheItems[templateName];
}
return false;
}
function addCacheItem(url,item){
if(canCache(url)&&templateCacheEnabled){
if(!cacheItems[url]){
cacheItems[url]=item;
}
if(!allLoaded){
templatesLoaded++;
if(templatesLoaded<cacheList.length){
loadNextTemplate();
}else{
finishLoad();
}
}
}
}
function removeCacheItem(url){
if(_browserInfo.browserName=="Chrome"){
if(typeof(chromeCacheItems[url])!="undefined"){
delete chromeCacheItems[url];
}
}else{
if(typeof(cacheItems[url])!="undefined"){
delete cacheItems[url];
}
}
}
function clearCacheItems(){
for(var url in(_browserInfo.browserName=="Chrome"?chromeCacheItems:cacheItems)){
removeCacheItem(url);
}
}
function getCachedList(){
var output=new Array();
for(var url in(_browserInfo.browserName=="Chrome"?chromeCacheItems:cacheItems)){
output.push(url);
}
return output;
}
function startLogoutTimer(){
stopLogoutTimer();
if(currentTimeoutValue==null){
return;
}
if(currentTimeoutValue>0){
top.logEvent("Session Tracker: Timeout reset for "+currentTimeoutValue/60000+" minutes.",null,8,3);
logoutTimerId=window.setTimeout(logoutExpression,currentTimeoutValue);
}else{
top.logEvent("Session Tracker: Timeout Disabled.",null,8,3);
}
};
function stopLogoutTimer(){
if(logoutTimerId!=null){
window.clearTimeout(logoutTimerId);
logoutTimerId=null;
top.logEvent("Session Tracker: Timeout cleared.",null,8,3);
}
};
function expireSession(){
switch(getCurrentUserContext()){
case UserContextTypes.Login:
case UserContextTypes.LoadOrFlash:
break;
default:
alert(getString('logoutTimeout'),AlertMsgTypes.Information,0);
logout();
break;
}
};
function setSessionTimeoutValue(timeout){
if(timeout==0){
stopLogoutTimer();
currentTimeoutValue=timeout;
}else{
currentTimeoutValue=timeout*60*1000;
top.logEvent("Session Tracker: current timeout value updated to "+currentTimeoutValue+".",null,6,3);
startLogoutTimer();
}
}
function getSessionTimeoutValue(){
return currentTimeoutValue/60/1000;
}
function setInitialLoadState(initializing){
top.logEvent("Index: Initial load state set to "+initializing,null,8,3);
initialLoad=initializing;
}
function openUtility(type){
var w=720;
var h=screen.height-(document.all?135:80);
var l=(screen.width-10)-w;
var options="top=0,left="+l+",width="+w+",height="+h+",status=no,resizable=yes,scrollbars=no,menubar=yes";
var url="";
switch(type){
case "ExpressionEvaluator":
url="/120814-042457/html/eval.html?parent="+window.location.hostname;
break;
default:
return;
}
window.open(url,type,options);
}
if(location.search.indexOf("eval=true")>-1){
openUtility("ExpressionEvaluator");
}
function frameContains(frame,page){
try{
return(frame.location.toString().indexOf(page)>-1);
}catch(e){
return false;
}
};
function captureDeviceContext(){
if(getCurrentUserContext()==UserContextTypes.DevicePage){
var hf=top.MX_HIDDEN;
try{
var showStatus=top.mainPage.getStatusContainer().isStatusExpanded();
}catch(e){
showStatus=false;
}
try{
var tabRef=top.mainPage.getContentContainer().getCurrentTab();
}catch(e2){
tabRef="none";
}
setCookieValue("pageRestore",hf.devNum+"^"+hf.devType+"^"+hf.encNum+"^"+(showStatus?"true":"false")+"^"+tabRef);
}
};
function gotoContext(type){
switch(type){
case UserContextTypes.Login:
logout();
break;
case UserContextTypes.RackOverview:
try{top.mainPage.goHome(true)}catch(e1){}
try{top.mainPage.getHiddenFrame().refreshNavTree();}catch(e2){}
try{top.mainPage.getHiddenFrame().refreshSystemStatus();}catch(e3){}
break;
case UserContextTypes.WizardEncSelect:
top.mainPage.getPortalFrame().gotoStepNumber(2);
break;
}
};
function getCurrentUserContext(){
var currentContext=UserContextTypes.None;
try{
if(frameContains(top.mainPage,"login.html")){
currentContext=UserContextTypes.Login;
}else if(frameContains(top.mainPage,"blank.html")){
currentContext=UserContextTypes.LoadOrFlash;
}else if(frameContains(top.mainPage.getPortalFrame(),"standbyInterface.html")){
currentContext=UserContextTypes.Standby;
}else if(frameContains(top.mainPage.getPortalFrame(),"portalFrames.html")){
if(frameContains(top.mainPage.getContentContainer(),"rackOverview.html")){
currentContext=UserContextTypes.RackOverview;
}else if(frameContains(top.mainPage.getContentContainer(),"oaFirmwareUpdate.html")){
currentContext=UserContextTypes.OaFirmwareUpdate;
}else{
currentContext=UserContextTypes.DevicePage;
}
}else if(frameContains(top.mainPage.getPortalFrame(),"wizardSkeleton.html")){
switch(top.mainPage.getPortalFrame().getCurrentStepNumber()){
case "0":
currentContext=UserContextTypes.WizardWelcome;
break;
case "2":
currentContext=UserContextTypes.WizardEncSelect;
break;
case "4":
if(top.mainPage.getPortalFrame().getStepsDocumentPath().indexOf('FirmwareUpdateSteps.xml')>-1){
currentContext=UserContextTypes.WizardFinish;
}
break;
case "13":
currentContext=UserContextTypes.WizardFinish;
break;
default:
currentContext=UserContextTypes.WizardSteps;
}
}
}catch(e){
top.logEvent("Index: Error in getCurrentUserContext(): "+e.message,1,7);
}
top.logEvent("Index: Returning user context "+currentContext,null,1,2);
return currentContext;
};
var isStandby;
var initialLoad=true;
var graphicsMap;
var STRINGS_DOC_PATH='/120814-042457/Strings/strings.var';
var DIAG_STRINGS_PATH='/120814-042457/Strings/diagnosticStrings.var';
var WIZ_STRINGS_DOC_PATH='/120814-042457/Strings/wizardStrings.var';
var GRAPHICS_MAP_PATH='/120814-042457/Strings/graphics-map.xml';
var STANDBY_XML_PATH='/standby.xml';
var LOGIN_BANNER_PATH='/bannerfile.txt';
function getString(key){
return getStringManager().getString('//strings/value[@key="'+key+'"]');
}
function getStringXpath(xpath){
return getStringManager().getString(xpath);
}
function getErrorString(errorCode,errorType){
if(errorType==null||errorType==""){
return getString(errorCode);
}else{
return getStringManager().getString("//strings/value[@key='"+errorCode+"' and @type='"+errorType+"']");
}
}
function getStringsDoc(){
return getStringManager().getStringsDOM();
}
function getGraphicsMap(){
return graphicsMap;
}
function refreshStrings(){
initStrings();
MX_HIDDEN.refreshStrings();
mainPage.refreshStrings();
if(frameContains(mainPage.getPortalFrame(),"wizardSkeleton.html")){
mainPage.getPortalFrame().location=mainPage.getPortalFrame().location;
}else{
mainPage.location=mainPage.location.href.replace("?loadWizard=true","");
}
window.setTimeout(function(){mainPage.displayNotice(getString("displayLangUpdated"),getString("availableLanguages"),AlertMsgTypes.Information,null,10);},2000);
}
function initStrings(){
getStringManager().unload();
getStringManager().addDataFile(STRINGS_DOC_PATH);
getStringManager().addDataFile(DIAG_STRINGS_PATH);
}
function initGraphicsMap(){
graphicsMap=getUrlLib().sendRequest("GET",GRAPHICS_MAP_PATH);
if(typeof(graphicsMap.responseXML.xml)!='undefined'){
graphicsMap=getXml().parseXML(graphicsMap.responseXML.xml);
}else{
graphicsMap=graphicsMap.responseXML;
}
}
function loadWizardStringsFile(){
getStringManager().addDataFile(WIZ_STRINGS_DOC_PATH);
}
function unloadWizardStringsFile(){
getStringManager().removeDataFile(WIZ_STRINGS_DOC_PATH);
}
function getMaxConnectionCount(){
var maxConnectionsValue='';
if(document.cookie!=null&&document.cookie!=''){
maxConnectionsValue=getCookieValue(MAX_CONNECTIONS_COOKIE_NAME());
}
if(maxConnectionsValue!=''){
numMaxConnections=parseInt(""+maxConnectionsValue);
}
return maxConnectionsValue;
}
function setRootCookieValue(cookieName,value,expires){
return setCookieValue(cookieName,value,expires);
}
function getRootCookieValue(key){
return getCookieValue(key);
}
function hiddenPageLoadData(isStandby){
displayHiddenFrame();
setTimeout('top.MX_HIDDEN.loadData('+isStandby+')',300);
}
function displayHiddenFrame(){
top.mainPage.location='/120814-042457/html/blank.html';
document.body.rows='100%,0%';
}
function hideHiddenFrame(){
document.body.rows='0%,100%';
}
function logout(killSessions){
stopLogoutTimer();
setInitialLoadState(true);
top.MX_HIDDEN.resetHiddenFrame(assertTrue(killSessions),function(){
hideHiddenFrame();
});
}
function loadMainPage(context){
var proxyLocal=top.MX_HIDDEN.getProxyLocal();
var enclosureStatus=null;
var setupCompleteValue='';
if(!checkStandby()){
enclosureStatus=proxyLocal.getEnclosureStatus();
setupCompleteValue=getElementValueXpath(enclosureStatus,'//hpoa:enclosureStatus/hpoa:wizardStatus');
}
var hasPrivilege=(proxyLocal.getUserAccessLevel()=='ADMINISTRATOR'&&proxyLocal.getUserOaPermission()==true);
var returnToWizard=((""+context).indexOf('Wizard')>-1);
if(checkStandby()){
document.body.rows='0%,100%';
top.mainPage.location='/120814-042457/html/mainPage.html?loadStandby=true';
}else if(hasPrivilege&&(returnToWizard||(initialLoad==true&&setupCompleteValue=='WIZARD_NOT_COMPLETED'))){
document.body.rows='0%,100%';
top.mainPage.location='/120814-042457/html/mainPage.html?loadWizard=true';
}else{
document.body.rows='0%,100%';
top.mainPage.location='/120814-042457/html/mainPage.html';
}
setInitialLoadState(false);
}
function initStandby(){
try{
var xmlhttp=getUrlLib().sendRequest("GET",STANDBY_XML_PATH);
if(xmlhttp.status==200){
isStandby=true;
}
else{
isStandby=false;
}
}
catch(e){
isStandby=false;
}
}
function checkStandby(fresh){
if(fresh){
initStandby();
}
return isStandby;
}
function getLoginBannerText(){
var bannerText="";
try{
var xmlhttp=getUrlLib().sendRequest("GET",LOGIN_BANNER_PATH);
if(xmlhttp.status==200){
bannerText=xmlhttp.responseText;
}
}catch(e){}
return bannerText;
}
function checkTweakMode(){
return(getConnectionMode()==connectionEnum.tweakMode);
}
function makeGuiActive(){
isStandby=false;
}
function makeGuiStandby(){
isStandby=true;
}
function checkHpSimSSO(){
return(getCookieValue(SIM_SSO_COOKIE_NAME())!='');
}
function resetApplication(callback){
try{
top.MX_HIDDEN.resetHiddenFrame(false,assertFunction(callback));
}catch(e){
if(isFunction(callback)){
callback();
}
}
}
function checkRefresh(){
isRefresh=false;
try{
isRefresh=top.MX_HIDDEN.checkRefresh();
}
catch(e){}
return isRefresh;
}
function checkFirmwareVersion(callback){
var versionOk=true;
var cacheVersion=getCookieValue('fwVersion');
var cacheDate=getCookieValue('buildDate');
var hpem=top.getTopology().getProxyLocal();
hpem.getSoapInterfaceInfo(function(result){
if(getCallSuccess(result)){
var localVersion=getElementValueXpath(result,'//hpoa:version');
var localDate=getElementValueXpath(result,'//hpoa:compiledDateTime');
interfaceFwVersion=localVersion;
if(cacheVersion!=localVersion||(cacheDate!=''&&cacheDate!=localDate)){
versionOk=(cacheVersion=='');
}
var date=new Date();
date.setMonth(date.getMonth()+60);
setCookieValue('fwVersion',localVersion,date.toGMTString());
setCookieValue('buildDate',localDate,date.toGMTString());
}
callback(versionOk);
});
}
function getInterfaceFwVersion(){
return interfaceFwVersion;
}
function initApplication(){
resetApplication(function(){
var hpemObj=null;
if(checkHpSimSSO()){
displayHiddenFrame();
top.getTransport().clearCallStacks();
top.getTopology().setTopologyMode(TopologyModes.Local);
window.setTimeout(function(){
top.getTopology().getTopology(function(result){
hpemObj=top.getTopology().getProxyLocal();
hpemObj.userLoginSSO(getCookieValue(SIM_SSO_COOKIE_NAME()));
hiddenPageLoadData(checkStandby());
startLogoutTimer();
});
},1000);
}else if(checkRefresh()){
setInitialLoadState(false);
displayHiddenFrame();
top.getTransport().clearCallStacks();
top.getTopology().setTopologyMode(TopologyModes.Local);
window.setTimeout(function(){
top.getTopology().getTopology(function(result){
hpemObj=top.getTopology().getProxyLocal();
hpemObj.userLoginSSO(top.MX_HIDDEN.getLocalEncKey());
hpemObj.checkIsValid(function(isValid){
if(isValid==true){
hpemObj.setIsAuthenticated(true);
hiddenPageLoadData(checkStandby());
startLogoutTimer();
}else{
top.logEvent("Check Refresh returned invalid session - must login.",null,1,2);
hpemObj.userLogOut(true);
loadLogin();
}
});
});
},100);
}else{
top.logEvent("Normal Sign In page.",null,1,2);
loadLogin();
}
});
}
function loadLogin(){
setInitialLoadState(true);
if(top.mainPage.location.toString().indexOf('login.html')==-1){
hideHiddenFrame();
top.getTopology().clearCache();
top.mainPage.location='/120814-042457/html/login.html';
}
}
function failLogin(result){
var errMsg=null;
if(exists(result)){
var errInfo=top.getCallAnalyzer().extractErrorInfo(result);
if(!(errInfo.errorType==ErrorType.UserRequest&&errInfo.errorNumber=='150')){
if(errInfo.errorType==ErrorType.FormManager&&errInfo.errorNumber=='300'){
errMsg=top.getString('loginTimedOutMsg');
}else{
errMsg=top.getErrorString(errInfo.errorNumber,errInfo.errorType);
}
}
}
stopLogoutTimer();
loadLogin();
if(typeof(top.mainPage.loginBody.failLogin)!='undefined'){
top.mainPage.loginBody.failLogin(errMsg);
}
}
function progressPageLoaded(targetFrame){
if(!allLoaded){
window.setTimeout(loadNextScript,1);
}
}
function hiddenFrameLoaded(targetFrame){
if(allLoaded){
if(cacheWarning){
displayHiddenFrame();
top.MX_HIDDEN.displayCacheWarning();
}else{
getMaxConnectionCount();
getTransport().setConnectionMode(connectionEnum.defaultMode,numMaxConnections);
initApplication();
}
}
}
function scriptLoaded(){
if(this.readyState){
if(this.readyState=="loaded"||this.readyState=="complete"){
progressPageLoaded();
}
}else if(this.onload){
progressPageLoaded();
}
}
function updateInitializationProgress(process,detail){
window.setTimeout(function(){
try{
var titleElem=top.mainPage.document.getElementById("processPara");
var detailElem=top.mainPage.document.getElementById("loadingBarSmall");
if(location.search.indexOf('devload=true')>-1){
titleElem.innerHTML=process;
detailElem.className="";
detailElem.innerHTML=(detail==""?"&nbsp;":detail);
}else{
if(detailElem.className!="progressBarSmall"){
detailElem.className="progressBarSmall";
detailElem.innerHTML="&nbsp;";
}
}
}catch(e){}
},1);
}
function loadNextTemplate(){
updateInitializationProgress("Loading Templates",cacheList[templatesLoaded][1]);
window.setTimeout(function(){try{nextTemplate=new XsltProcessor(cacheList[templatesLoaded][0])}catch(e){}},1);
}
function loadNextScript(){
if(scriptsLoaded<scriptPaths.length){
updateInitializationProgress("Loading Scripts",scriptPaths[scriptsLoaded][1]);
var head=document.getElementsByTagName("head")[0];
var inlineScript=document.getElementById("inlineScript");
script=document.createElement('script');
script.type='text/javascript';
script.src=scriptPaths[scriptsLoaded++][0];
if(script.onreadystatechange===null){
script.onreadystatechange=scriptLoaded;
}else{
script.onload=scriptLoaded;
}
head.insertBefore(script,inlineScript);
}else{
initStrings();
initStandby();
updateInitializationProgress("Checking Cache","Retrieving firmware version");
checkFirmwareVersion(function(versionOk){
if(versionOk){
initGraphicsMap();
if(templateCacheEnabled){
loadNextTemplate();
}else{
finishLoad();
}
}else{
cacheWarning=true;
finishLoad();
}
});
}
}
function finishLoad(){
allLoaded=true;
updateInitializationProgress("Loading Complete","");
window.setTimeout(function(){top.MX_HIDDEN.location='/120814-042457/html/hiddenFrame.html'},100);
}
function refreshTopology(oaDetailsCallback){
var callback=assertFunction(oaDetailsCallback);
getTopology().setTopologyMode(TopologyModes.Linked);
getTopology().getTopology(function(result,fname,changed){
if(changed==false){
mainPage.displayNotice(getString("topologyCurrent"),getString("topologyNotice"),AlertMsgTypes.Normal,null,5);
}else if(changed==null){
mainPage.displayNotice(getString("topologyNotAvailable"),getString("topologyNotice"),AlertMsgTypes.Critical);
}
},true,callback);
}
  </script>  
</head>
  <frameset rows="0%,100%" framespacing="0" border="false" frameborder="0">
    <frame id='MX_HIDDEN' name='MX_HIDDEN' src="/120814-042457/html/blank.html" noresize="noresize" onload="hiddenFrameLoaded(this);">
    <frame name="mainPage" id="mainPage" src="/120814-042457/html/loading.var" scrolling="no" marginwidth="0" marginheight="0" onload="progressPageLoaded(this);">
  </frameset>
</html>

