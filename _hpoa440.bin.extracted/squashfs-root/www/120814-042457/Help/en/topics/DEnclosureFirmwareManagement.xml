<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/120814-042457/Help/stylesheets/help-topic.xsl"?>
<topic topic-id="DEnclosureFirmwareManagement" xmlns:fn="http://www.w3.org/2005/02/xpath-functions">
  <title>Enclosure Firmware Management</title>
  <source>/120814-042457/Help/en/topics/DEnclosureFirmwareManagement.xml</source>
  <keywords>enclosure firmware management manual discovery manual update Secure Boot firmware management restrictions</keywords>
  <intro />
  <sections>
    <section>
      <desc />
      <content>Enclosure Firmware Management settings<p class="bodytext">All Enclosure Firmware Management features are available through both the Onboard Administrator GUI and CLI, unless Secure Boot is in effect for the blade in the enclosure. Secure Boot restricts users from modifying boot options or performing boot operations from the Onboard Administrator GUI or CLI. These tasks must be performed from the device configured in BIOS by the Administrator.</p><p class="bodytext">The Onboard Administrator user role and bay permissions control the Enclosure Firmware Management settings and ability to view the firmware information.</p><p class="tablespacerwidebefore" /><table width="100%" style="border-collapse:collapse;" cellspacing="0" cellpadding="2"><tr><th class="tableheading" style="border:1px solid #010101;text-align:left;">User role
</th><th class="tableheading" style="border:1px solid #010101;text-align:left;">Modify settings or scheduled update
</th><th class="tableheading" style="border:1px solid #010101;text-align:left;">Initiate manual discovery or update
</th><th class="tableheading" style="border:1px solid #010101;text-align:left;">View firmware versions
</th></tr><tr valign="top"><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">Onboard Administrator administrator or operator
</p></td><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">Yes
</p></td><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">Yes, OA Administrator only*
</p></td><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">Yes
</p></td></tr><tr valign="top"><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">Server administrator or operator
</p></td><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">No
</p></td><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">Yes, OA Administrator only*
</p></td><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">Yes, for permitted server bays
</p></td></tr><tr valign="top"><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">Onboard Administrator user
</p></td><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">No
</p></td><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">No
</p></td><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">Yes, for permitted bays
</p></td></tr></table><p class="tablestatementtext">* If Secure Boot mode is in effect for the blade in the enclosure, this operation cannot be performed from the GUI or CLI.</p>Enabling Enclosure Firmware Management<p class="bodytext">The <b>Enable Enclosure Firmware Management</b> check box globally enables or disables (default setting) Enclosure Firmware Management. When disabled, you cannot start any manual Enclosure Firmware Management operations. Any previously configured automatic or scheduled operation does not occur. If the setting is changed from enabled to disabled, any in-progress Enclosure Firmware Management discoveries or updates continue until they are finished. </p><p class="alertspacerbefore" /><table width="100%" style="border-collapse:collapse;" cellspacing="0" cellpadding="2" rowsep="0" colsep="0"><tr valign="top"><td style="border:0px;width:1%;" align="left"><p class="tablebodytext"><img src="/120814-042457/Help/images/35894.png" alt="" /></p></td><td style="border-top:1px solid #0066FF;border-right:0px;border-bottom:1px solid #0066FF;border-left:0px;" align="left"><p class="tablebodytext"><b style="color:#0066FF;">IMPORTANT:</b>  After Enclosure Firmware Management operations (updates and discoveries) have begun on a server, you cannot stop these operations. Ensure that your enclosure is IPv6-enabled before using an IPv6 address for the Firmware Management ISO.
</p></td></tr></table><p class="alertspacerafter" /><p class="bodytext">Enclosure Firmware Management is not supported on the following Onboard Administrator hardware modules:</p><ul class="listbullet"><li class="listbullet">HP BladeSystem c3000 Onboard Administrator (HP part number 448589-B21, 461514-B21)</li><li class="listbullet">HP BladeSystem c7000 Onboard Administrator (HP part number 412142-B21)</li></ul><p class="bodytext">Enclosure Firmware Management cannot be enabled unless the active Onboard Administrator hardware module is supported. If you attempt to enable Enclosure Firmware Management when the active Onboard Administrator is not supported, an error message appears:</p><p class="codeexample1"><tt>Enclosure Firmware Management is not supported on the active OA hardware present.</tt></p><p class="bodytext">If the standby Onboard Administrator module is unsupported, a warning message appears:</p><p class="codeexample1"><tt>Enclosure Firmware Management is not supported on the standby OA hardware present. The feature will be disabled if the standby OA becomes Active.</tt></p>Configuring the location of the firmware image <p class="bodytext">To perform firmware discovery or firmware updates, Enclosure Firmware Management requires a firmware ISO image. You can provide one the following locations for the ISO firmware image:</p><ul class="listbullet"><li class="listbullet">An HTTP URL-based ISO image hosted on a web server. Provide an IPv4 address in the following format: <tt>protocol://[&lt;IPv4 Address&gt;]/path/filename</tt>. To provide an IPv6 URL address, specify the address between brackets in the following format: <tt>protocol://[&lt;IPv6 Address&gt;]/path/filename</tt>. <p class="listcontinue">The maximum length of the URL is 511 characters.</p></li><li class="listbullet">A USB key with ISO image connected to the USB port of the Onboard Administrator.<p class="listcontinue">A USB key converted to bootable media from the SPP ISO image is not supported with Enclosure Firmware Management. The USB key must contain the ISO image in the root directory. If a physical DVD is used, the DVD must not contain the ISO image. The DVD must be a bootable disk created from the ISO image. The latest ISO downloads are available at the <a href="http://www.hp.com/go/spp/download" target="ID0EQF">HP website</a>.</p></li><li class="listbullet">A physical DVD inserted into the enclosure DVD drive.</li></ul><p class="bodytext">The maximum supported size of the SPP ISO image is 4GB. With SPP ISO images 4GB or greater, you must create a custom ISO image that excludes components unnecessary to the OA EFM blade firmware update process. At minimum, the custom ISO must contain only the firmware components for HP ProLiant BL Series server blades. For more information, see the <i>HP BladeSystem Onboard Administrator User Guide</i>.</p>Force Downgrades<p class="bodytext">This check box globally enables or disables (default setting) forced downgrades. When disabled, components that have higher firmware revisions than are present on the ISO image are excluded from update. This setting is for all the supported server blades in this enclosure. When enabled, Enclosure Firmware Management instructs the HP SUM engine to enable flashing of component firmware that is at a higher revision than in the image. Enabling this setting does not guarantee component firmware will be downgraded. If you are using the Enable Force Downgrades option, consult the ISO documentation in advance to correctly set expectation.</p>Power Policy<p class="bodytext">The server must be booted from the ISO image to update or discover the firmware. The power policy informs the Onboard Administrator of what action to take if the server is powered on when the operation is initiated. This setting applies to both scheduled and manual operations. The default Power Policy is Must be Off<b>.</b></p><p class="bodytext">If power policy is set to Power Off, the Onboard Administrator waits five minutes for the server to respond to the request. If the server does not shut down in this time the Firmware Management operation fails. If the server is running an operating system that initiated the shutdown but did not complete within five minutes, the server might shut down and remain powered off.</p><p class="tablespacerbefore" /><table width="100%" style="border-collapse:collapse;" cellspacing="0" cellpadding="2"><tr><th class="tableheading" style="border:1px solid #010101;text-align:left;">Setting
</th><th class="tableheading" style="border:1px solid #010101;text-align:left;">Description
</th></tr><tr valign="top"><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">Must be Off
</p></td><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">The Onboard Administrator cancels the operation if the server is powered on.
</p></td></tr><tr valign="top"><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">Power Off
</p></td><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">The Onboard Administrator mimics a physical momentary press of the power button on the server blade, powering the server blade off gracefully.
</p></td></tr><tr valign="top"><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">Force Power Off
</p></td><td style="border:1px solid #010101;" align="left"><p class="tablebodytext">The Onboard Administrator mimics a physical press and hold of the power button on the server blade, forcing the server blade to shut power off without regard for first shutting down the OS. 
</p></td></tr></table><p class="tablespacerafter" /><p class="alertspacerbefore" /><table width="100%" style="border-collapse:collapse;" cellspacing="0" cellpadding="2" rowsep="0" colsep="0"><tr valign="top"><td style="border:0px;width:1%;" align="left"><p class="tablebodytext"><img src="/120814-042457/Help/images/35928.png" alt="" /></p></td><td style="border-top:1px solid #0066FF;border-right:0px;border-bottom:1px solid #0066FF;border-left:0px;" align="left"><p class="tablebodytext"><b style="color:#0066FF;">CAUTION: </b> You must be careful when using the Force Power Off policy on servers with an operating system installed, because data corruption might occur.
</p></td></tr></table><p class="bodytext" />Update Policy<p class="bodytext">Update policies available for Firmware Management include:</p><ul class="listbullet"><li class="listbullet">Manual Discovery and Manual Update only—The default policy. This policy prevents the Onboard Administrator from automatically performing server update or discovery upon insertion into the enclosure. <p class="listcontinue">Manual Discovery or Update and Scheduled Update are required before the Onboard Administrator can display extended server firmware versions.</p></li><li class="listbullet">Automatic Discovery of Firmware on Insertion—Enables the Onboard Administrator to perform a boot for discovery on a server enabled using Bays to Include, collecting extended firmware information for that server, updating the firmware management log for that event, and then rebooting the server into normal operation. You can then view the detected firmware versions and update that firmware with either a manual or scheduled update.</li><li class="listbullet">Automatic Update of Firmware on Insertion—Enables the Onboard Administrator to perform a boot for update on a server enabled using Bays to Include, collecting updated extended firmware information for that server, updating the firmware management log for that event, and then rebooting the server into normal operation. This policy updates the server firmware to the selected firmware image after a service event such as server board or option card replacement.</li></ul><p class="bodytext">Automatic Discovery and Automatic Update are mutually exclusive policies and affect all selected Bays to Include in the enclosure.</p>Scheduled Update<p class="bodytext">A scheduled firmware update policy provides a schedule for the Onboard Administrator to automatically update all the Bays to Include to the firmware versions on the ISO firmware image. At the scheduled date and time, the Onboard Administrator starts an update operation using the Power Policy on all Bays to Include, updates their firmware using the ISO firmware image, and then reboots all the included servers back into normal operation.</p>Bays to Include<p class="bodytext">All device bays are included for firmware management by default. The Onboard Administrator administrator can select specific device bays to include and not select other device bays that must be excluded from enclosure firmware management update policies, manual updates, or scheduled updates.</p><p class="bodytext">By default, the <b>Firmware Manage All Servers</b> check box is selected, enabling Enclosure Firmware Management policies and scheduled updates to be performed on all available servers.</p><p class="bodytext">Either select each of the base bays, side a bays, and side b bays individually, or select all device bays by selecting the <b>Firmware Manage All Servers</b> check box.</p><p class="procedurelead-in">To manually select specific servers for Enclosure Firmware Management:</p><ol class="listnumber"><li class="listnumber">Clear the <b>Firmware Manage All Servers</b> check box.</li><li class="listnumber">Select the check box next to the individual bays, or select bays according to bay type.</li><li class="listnumber">Click <b>Apply</b>. The updated list of bays to include for Enclosure Firmware Management appears.</li></ol><p class="bodytext">Bay selection is currently limited to device bays only. Switch and Onboard Administrator bays cannot be selected.</p><p class="bodytext">The Bays to Include selection only applies to ProLiant server blades. Integrity server blades do not support this feature. Partner blade support is through the associated server blade based on whether the firmware ISO supports the PCIe adapter card in the partner blade.</p></content>
    </section>
  </sections>
</topic>